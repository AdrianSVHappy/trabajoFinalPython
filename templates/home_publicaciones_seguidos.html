<!DOCTYPE html>  <!-- Declara el tipo de documento como HTML5 -->
<html lang="es">  <!-- Define el idioma del contenido como espa帽ol -->
<head>
    <meta charset="UTF-8">  <!-- Configura la codificaci贸n de caracteres como UTF-8 para soportar caracteres especiales -->
    <title>Publicaciones de los que sigo</title>  <!-- T铆tulo de la p谩gina, visible en la pesta帽a del navegador -->

    <!-- Enlace a la hoja de estilos CSS ubicada en la carpeta "static/css" -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="container">  <!-- Contenedor principal para organizar la estructura de la p谩gina -->
        
        <h2>Bienvenido, {{ user.username }}</h2>  <!-- Muestra un saludo con el nombre de usuario actual -->

        <!-- Secci贸n con enlaces para acceder al perfil o cerrar sesi贸n -->
        <div class="profile-links">
            <a href="{{ url_for('profile') }}">Ver mi perfil</a>  <!-- Enlace a la p谩gina de perfil del usuario -->
            <a href="{{ url_for('logout') }}">Cerrar sesi贸n</a>  <!-- Enlace para cerrar sesi贸n -->
        </div>

        <!-- Secci贸n de b煤squeda de usuarios -->
        <div class="search-box">
            <form action="{{ url_for('buscar') }}" method="POST">  <!-- Formulario para buscar usuarios, env铆a datos por m茅todo POST -->
                <input type="text" name="termino_busqueda" placeholder="Buscar usuario..." required>  <!-- Campo de entrada para el t茅rmino de b煤squeda -->
                <button type="submit"></button>  <!-- Bot贸n de env铆o con icono de lupa -->
            </form>
        </div>

        <!-- Secci贸n de publicaciones de las personas que sigue el usuario -->
        <div class="posts-section">
            <h3>Publicaciones de las personas que sigo</h3>  <!-- Encabezado de la secci贸n -->

            <div class="posts">  <!-- Contenedor para todas las publicaciones -->
                {% for post in posts_seguidos %}  <!-- Bucle que recorre las publicaciones de los usuarios seguidos -->
                    <div class="post">  <!-- Contenedor de una publicaci贸n individual -->
                        <p>
                            <!-- Muestra la foto de perfil del usuario que hizo la publicaci贸n -->
                            <img src="{{ url_for('static', filename='images/' + (post.user.id|string) + '.jpg') if post.user.foto is true else url_for('static', filename='images/default.jpg') }}" 
                                alt="Foto de perfil" class="profile-pic">
                            <strong>{{ post.user.nombre }}:</strong> {{ post.texto }}  <!-- Muestra el nombre del usuario y el contenido de la publicaci贸n -->
                        </p>

                        {% if post.computed_foto_path %}  <!-- Verifica si la publicaci贸n tiene una imagen adjunta -->
                            <!-- Muestra la imagen de la publicaci贸n -->
                            <img src="{{ url_for('static', filename='publicaciones/' + post.computed_foto_path) }}" 
                                alt="Foto de la publicaci贸n" class="post-image">
                        {% else %}
                            <p><em>No se ha a帽adido ninguna foto a la publicaci贸n.</em></p>  <!-- Mensaje si no hay imagen en la publicaci贸n -->
                        {% endif %}

                        <h4>Comentarios</h4>  <!-- Encabezado para la secci贸n de comentarios -->

                        {% for comment in post.comments %}  <!-- Bucle que recorre los comentarios de la publicaci贸n -->
                        <p>
                            <!-- Muestra la foto de perfil del usuario que hizo el comentario -->
                            <img src="{{ url_for('static', filename='images/' + (comment.user.id|string) + '.jpg') if comment.user.foto is true else url_for('static', filename='images/default.jpg') }}" 
                                alt="Foto de perfil" class="comment-pic">
                            <strong>{{ comment.user.nombre }}:</strong> {{ comment.texto }}  <!-- Muestra el nombre del usuario y el contenido del comentario -->
                        </p>
                        {% endfor %}  <!-- Fin del bucle de comentarios -->

                        <!-- Formulario para a帽adir un nuevo comentario a la publicaci贸n -->
                        <form method="POST" action="{{ url_for('add_comment', post_id=post.id) }}" class="comment-form">
                            <input type="text" name="comment_text" placeholder="Escribe un comentario..." required>  <!-- Campo de entrada del comentario -->
                            <button type="submit">Comentar</button>  <!-- Bot贸n para enviar el comentario -->
                        </form>
                    </div>  <!-- Fin de una publicaci贸n -->
                {% endfor %}  <!-- Fin del bucle de publicaciones -->
            </div>  <!-- Fin del contenedor de publicaciones -->
        </div>  <!-- Fin de la secci贸n de publicaciones -->
    </div>  <!-- Fin del contenedor principal -->
</body>
</html>  <!-- Fin del documento HTML -->
